# Telegram –ë–∞—Ä–∞—Ö–æ–ª–∫–∞ MiniApp

–ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è Telegram —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –±–∞—Ä–∞—Ö–æ–ª–∫–∏ –∏ —Å–∏—Å—Ç–µ–º–æ–π –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤.

## –§—É–Ω–∫—Ü–∏–∏

- üîê **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram** - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Telegram WebApp API
- üíé **–°–∏—Å—Ç–µ–º–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤** - –∫–∞–∂–¥—ã–π —á–∞—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 1 –∫—Ä–∏—Å—Ç–∞–ª–ª (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ñ—Ñ–ª–∞–π–Ω–µ)
- üìù **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π** - 1 –∫—Ä–∏—Å—Ç–∞–ª–ª –∑–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é
- üö´ **–ê–Ω—Ç–∏—Ñ–ª—É–¥ –∑–∞—â–∏—Ç–∞** - 1 –º–∏–Ω—É—Ç–∞ –º–µ–∂–¥—É –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏
- üì∏ **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –¥–æ 5 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
- üíæ **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
‚îú‚îÄ‚îÄ index.html          # –û—Å–Ω–æ–≤–Ω–∞—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ styles.css          # –°—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ app.js             # JavaScript –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ package.json       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –°–∏—Å—Ç–µ–º–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 1 –∫—Ä–∏—Å—Ç–∞–ª–ª –∫–∞–∂–¥—ã–π —á–∞—Å
- –¢–∞–π–º–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –¥–∞–µ—Ç—Å—è 1 –∫—Ä–∏—Å—Ç–∞–ª–ª
- –ö—Ä–∏—Å—Ç–∞–ª–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage

### –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- –°—Ç–æ–∏–º–æ—Å—Ç—å: 1 –∫—Ä–∏—Å—Ç–∞–ª–ª –∑–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é
- –ê–Ω—Ç–∏—Ñ–ª—É–¥: 1 –º–∏–Ω—É—Ç–∞ –º–µ–∂–¥—É –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏
- –ü–æ–ª—è: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω–∞, –¥–æ 5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
npm start
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (Frontend + Backend)

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone your-repo
cd your-repo

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ backend
cd backend
npm install
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞–Ω–∞–ª—ã –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, @saratov_bazaar)
4. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª—ã –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cd backend
cp env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
CITY_CHANNELS={"saratov": "@saratov_bazaar"}
CORS_ORIGIN=https://your-domain.com
```

#### 4. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Backend

**Heroku:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Heroku CLI
npm install -g heroku

# –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
heroku create your-app-name

# –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
heroku config:set TELEGRAM_BOT_TOKEN=your_token
heroku config:set CITY_CHANNELS='{"saratov": "@saratov_bazaar"}'

# –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ
git push heroku main
```

**Vercel:**
```bash
cd backend
npm install -g vercel
vercel
# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

#### 5. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Frontend

**Vercel (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
# –í –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
vercel
# –£–∫–∞–∂–∏—Ç–µ, —á—Ç–æ —ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–π—Ç
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è API
```

**Netlify:**
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ build command: `echo "Static site"`
3. –£–∫–∞–∂–∏—Ç–µ publish directory: `.`
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS
–û–±–Ω–æ–≤–∏—Ç–µ `CORS_ORIGIN` –≤ backend `.env` –Ω–∞ URL –≤–∞—à–µ–≥–æ frontend.

### –¢–æ–ª—å–∫–æ Frontend (–±–µ–∑ backend)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ frontend –±–µ–∑ backend:

1. –û–±–Ω–æ–≤–∏—Ç–µ `API_BASE` –≤ `app.js` –Ω–∞ URL –≤–∞—à–µ–≥–æ API
2. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ frontend –Ω–∞ –ª—é–±–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WebApp URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–æ—Ç–∞:
   ```
   /setmenubutton
   @your_bot_username
   –ë–∞—Ä–∞—Ö–æ–ª–∫–∞
   https://your-domain.com
   ```

## API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### Telegram WebApp API
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram WebApp API –¥–ª—è:
- –ü–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `localStorage`:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∫—Ä–∏—Å—Ç–∞–ª–ª–∞
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- –°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π

## –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤
–í —Ñ–∞–π–ª–µ `app.js` –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```javascript
}, 60 * 60 * 1000); // 1 —á–∞—Å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞–Ω—Ç–∏—Ñ–ª—É–¥ –≤—Ä–µ–º–µ–Ω–∏
–í —Ñ–∞–π–ª–µ `app.js` –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```javascript
return timeDiff >= 60 * 1000; // 1 –º–∏–Ω—É—Ç–∞
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
–í —Ñ–∞–π–ª–µ `app.js` –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```javascript
if (!this.canPublish() || this.crystals < 1) {
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –î–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–¥–µ—Ä–∞—Ü–∏–∏
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç —Å–ø–∞–º–∞

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.
